{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>üìä –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {{ user.username }}</h2>
    <div>
        <a href="{{ url_for('admin_admins') }}" class="btn btn-outline-primary">‚Üê –ö —Å–ø–∏—Å–∫—É –∞–¥–º–∏–Ω–æ–≤</a>
        <a href="{{ url_for('admin_users') }}" class="btn btn-outline-secondary">üë• –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
    </div>
</div>

<div class="row">
    <div class="col-md-4">
        <div class="card bg-primary text-white">
            <div class="card-body text-center">
                <h3>{{ actions.zones_created }}</h3>
                <p class="mb-0">–°–æ–∑–¥–∞–Ω–æ –∑–æ–Ω</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card bg-success text-white">
            <div class="card-body text-center">
                <h3>{{ actions.reports_submitted }}</h3>
                <p class="mb-0">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç—á–µ—Ç–æ–≤</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card bg-info text-white">
            <div class="card-body text-center">
                <h3>{{ actions.tasks_created }}</h3>
                <p class="mb-0">–°–æ–∑–¥–∞–Ω–æ –∑–∞–¥–∞—á</p>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>üÜï –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–æ–Ω—ã</h5>
            </div>
            <div class="card-body">
                {% if actions.recent_zones %}
                <div class="list-group">
                    {% for zone in actions.recent_zones %}
                    <div class="list-group-item">
                        <h6 class="mb-1">{{ zone.name }}</h6>
                        <small class="text-muted">–°–æ–∑–¥–∞–Ω–∞: {{ zone.created_date[:10] }}</small>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p class="text-muted">–ù–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∑–æ–Ω</p>
                {% endif %}
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç—á–µ—Ç—ã</h5>
            </div>
            <div class="card-body">
                {% if actions.recent_reports %}
                <div class="list-group">
                    {% for report in actions.recent_reports %}
                    <div class="list-group-item">
                        <h6 class="mb-1">{{ report.zone_name }}</h6>
                        <p class="mb-1 small">{{ report.notes[:100] }}{% if report.notes|length > 100 %}...{% endif %}</p>
                        <small class="text-muted">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω: {{ report.report_date[:10] }}</small>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p class="text-muted">–ù–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="card mt-4">
    <div class="card-header bg-light">
        <h5 class="mb-0">üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <p><strong>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> {{ user.username }}</p>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>–ì–æ—Ä–æ–¥:</strong> {{ user.city }}</p>
            </div>
            <div class="col-md-6">
                <p><strong>–†–æ–ª—å:</strong> 
                    <span class="badge bg-{{ 'danger' if user.role == 'creator' else 'warning' if user.role == 'admin' else 'secondary' }}">
                        {{ user.role }}
                    </span>
                </p>
                <p><strong>–°—Ç–∞—Ç—É—Å:</strong> 
                    <span class="badge bg-{{ 'success' if user.is_active else 'danger' }}">
                        {{ '–ê–∫—Ç–∏–≤–µ–Ω' if user.is_active else '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω' }}
                    </span>
                </p>
                <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> {{ user.created_date[:10] }}</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}